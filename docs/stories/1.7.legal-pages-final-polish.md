# Story 1.7: Legal Pages & Final Polish

## Status
Accepted

## Story
**As a** Project Owner,
**I want** to add the necessary legal pages and perform a final quality check,
**so that** the site is professional, compliant, and ready for launch.

## Acceptance Criteria
1. A Privacy Policy page is created, sourcing its content from a Markdown file.
2. A Terms of Service page is created, sourcing its content from a Markdown file.
3. The footer links for these pages are correctly implemented.
4. A full site review is conducted to check for broken links, typographical errors, and responsive design issues on all pages.
5. The E2E test suite covering the main user funnel is passing.
6. The production domain (`ahaagile.com.au`) is correctly configured in Vercel.

## Tasks / Subtasks
- [ ] Task 1: Create Privacy Policy page with markdown content (AC: 1)
  - [ ] Create markdown content file `/content/privacy-policy.md` with comprehensive privacy policy content
  - [ ] Create `src/app/(legal)/privacy-policy/page.tsx` following Next.js App Router pattern
  - [ ] Use existing markdown processing utility from `src/lib/markdown.ts`
  - [ ] Apply sitewide Layout component for consistent navigation and styling
  - [ ] Ensure proper TypeScript typing for privacy policy page component
  - [ ] Use Static Site Generation (SSG) for optimal performance
  - [ ] Apply responsive typography and spacing using Tailwind CSS classes
- [ ] Task 2: Create Terms of Service page with markdown content (AC: 2)
  - [ ] Create markdown content file `/content/terms-of-service.md` with comprehensive terms content
  - [ ] Create `src/app/(legal)/terms-of-service/page.tsx` following Next.js App Router pattern
  - [ ] Use existing markdown processing utility from `src/lib/markdown.ts`
  - [ ] Apply sitewide Layout component for consistent navigation and styling
  - [ ] Ensure proper TypeScript typing for terms of service page component
  - [ ] Use Static Site Generation (SSG) for optimal performance
  - [ ] Apply responsive typography and spacing using Tailwind CSS classes
- [ ] Task 3: Update footer component with legal page links (AC: 3)
  - [ ] Locate existing Footer component in `src/components/layout/`
  - [ ] Add navigation links for Privacy Policy and Terms of Service pages
  - [ ] Use Next.js Link component for client-side routing performance
  - [ ] Style footer links consistently with existing footer design using Tailwind CSS
  - [ ] Test footer links route correctly to legal pages
  - [ ] Ensure footer links are accessible with proper ARIA labels
- [ ] Task 4: Conduct comprehensive site quality review (AC: 4)
  - [ ] Test all navigation links across all pages (Homepage, Services, Case Study, Consultation, Privacy, Terms)
  - [ ] Verify responsive design works correctly on mobile, tablet, and desktop viewports
  - [ ] Check for typographical errors across all content and UI text
  - [ ] Validate all call-to-action buttons function correctly and route to expected pages
  - [ ] Test Calendly integration and contact form functionality on consultation page
  - [ ] Verify markdown content renders correctly on all content pages
  - [ ] Check that all images and assets load properly
  - [ ] Test site performance and accessibility with browser dev tools
- [ ] Task 5: Implement and verify E2E test suite (AC: 5)
  - [ ] Create Playwright E2E tests for main user funnel in `tests/e2e/`
  - [ ] Test Homepage → Services → Case Study → Book Consultation user journey
  - [ ] Test Privacy Policy and Terms of Service page accessibility from footer
  - [ ] Verify all critical call-to-action flows work end-to-end
  - [ ] Test responsive behavior across different device sizes
  - [ ] Run E2E test suite and ensure all tests pass
  - [ ] Document any test failures and fix underlying issues
- [ ] Task 6: Configure production domain in Vercel (AC: 6)
  - [ ] Access Vercel project settings for ahaagile-website
  - [ ] Configure custom domain `ahaagile.com.au` in Vercel dashboard
  - [ ] Verify SSL certificate is properly configured for the custom domain
  - [ ] Test that the production domain correctly serves the site
  - [ ] Update any domain-specific configuration or environment variables
  - [ ] Verify domain redirects and canonical URLs are working correctly
- [ ] Task 7: Create unit tests for legal pages (Testing Requirements)
  - [ ] Create `src/app/(legal)/privacy-policy/page.test.tsx` with rendering tests
  - [ ] Create `src/app/(legal)/terms-of-service/page.test.tsx` with rendering tests
  - [ ] Test legal page components render markdown content correctly
  - [ ] Test pages integrate properly with sitewide Layout component
  - [ ] Update Footer component tests to include new legal page links
  - [ ] Verify test coverage meets project standards
  - [ ] Run all unit tests and ensure they pass

## Dev Notes

### Previous Story Insights
[Source: docs/stories/1.5.consultation-page-calendly-integration.md, docs/stories/1.6.finalize-homepage-content.md]
- Sitewide layout components (Header, Footer) are complete and working with consistent navigation
- Markdown utility (`src/lib/markdown.ts`) is established and working with TypeScript types
- react-markdown (~9.0.0) library is installed and configured for markdown processing
- Next.js App Router is properly configured with client-side routing and SSG patterns
- Existing pattern for content pages: markdown files in `/content/` directory rendered by page components
- Call-to-action link mapping pattern is established for internal routing
- Contact form and Calendly integration are complete and functional
- Testing patterns are established with Jest and React Testing Library
- All previous pages successfully use the Layout component pattern

### Tech Stack Requirements
[Source: architecture/3-tech-stack.md]
**MUST use these exact versions:**
- **Framework**: Next.js ~14.2.3 (App Router for routing and SSG)
- **UI Library**: React ~18.3.1 (Component architecture)
- **Styling**: Tailwind CSS ~3.4.3 (Utility-first CSS for responsive design)
- **Language**: TypeScript ~5.4.5 (Type safety for all components and utilities)
- **Testing**: Jest / RTL ~29.7.0 (Unit testing for page components)
- **E2E Testing**: Playwright ~1.44.0 (End-to-end testing framework)
- **Linting**: ESLint ~8.57.0 (Code linting and style enforcement)

### Project Structure Requirements
[Source: architecture/5-unified-project-structure.md]
**File locations for this story:**
- `/content/privacy-policy.md` - Privacy policy markdown content (needs to be created)
- `/content/terms-of-service.md` - Terms of service markdown content (needs to be created)
- `/src/app/(legal)/privacy-policy/page.tsx` - Privacy policy page component (needs to be created)
- `/src/app/(legal)/terms-of-service/page.tsx` - Terms of service page component (needs to be created)
- `/src/components/layout/Footer.tsx` - Footer component (exists, needs legal links added)
- `/src/app/(legal)/privacy-policy/page.test.tsx` - Privacy policy test file (needs to be created)
- `/src/app/(legal)/terms-of-service/page.test.tsx` - Terms of service test file (needs to be created)
- `/tests/e2e/` - E2E test directory (needs main user funnel tests)

**Architecture compliance:**
- Use Next.js App Router pattern with route groups `(legal)` for legal pages
- Place content in `/content/` directory following established pattern
- Test files should be alongside component files
- Utilize existing markdown processing infrastructure
- Follow established SSG patterns for content pages

### Markdown Processing Requirements
[Source: architecture/5-unified-project-structure.md, architecture/2-high-level-architecture.md]
- Markdown files are stored in `/content/` directory for content management
- Use existing `src/lib/markdown.ts` utility as specified in project structure
- Legal pages will be statically generated for performance (Jamstack pattern)
- **Already Implemented**: `react-markdown` (~9.0.0) for markdown processing
  - Provides React component-based rendering
  - Supports custom components for enhanced styling
  - Lightweight and compatible with Next.js SSG
  - Handles sanitization and security concerns

### Architecture Pattern Requirements
[Source: architecture/2-high-level-architecture.md]
- **Jamstack Pattern**: Static site generation for legal page content for maximum performance
- **Component-Based UI**: Reusable React components for content rendering
- **Monorepo Structure**: All frontend content in single repository

### Performance Requirements
[Source: architecture/7-security-and-performance.md]
- **Static Site Generation (SSG)**: Legal pages must be statically generated at build time
- **Minimal JavaScript**: Avoid heavy client-side JavaScript for fast load times
- **Image Optimization**: Use Next.js Image component if any images are added to legal content

### Component Architecture Standards
[Source: architecture/9-coding-standards.md]
- **Type Safety**: Use TypeScript with strict mode for all components and utilities
- **API Calls**: Use native `fetch` API if needed (not applicable for this story)
- **Environment Variables**: Server-side only access (not applicable for this story)

### Legal Page Content Requirements
- Privacy Policy should cover data collection, usage, and user rights (GDPR/CCPA compliance considerations)
- Terms of Service should cover service usage, limitations, and legal disclaimers
- Content should be professional and legally appropriate for a consultancy business
- Both pages should be accessible and easy to read for visitors

### Footer Integration Requirements
[Source: docs/stories/1.2.core-layout-styling-navigation.md]
- Footer component already exists with copyright notice and placeholder legal links
- Footer is part of the sitewide Layout component and appears on all pages
- New legal page links must be functional and use Next.js client-side routing
- Footer links should be styled consistently with existing footer design

### E2E Testing Requirements
[Source: architecture/8-testing-strategy.md]
- **E2E Testing Framework**: Playwright (~1.44.0) for end-to-end testing
- **Primary User Funnel**: Homepage → Case Study → Consultation Page must be tested
- **Critical Flows**: All call-to-action buttons and navigation links should be verified
- Legal page accessibility from footer links should be tested
- Tests should cover responsive behavior across different device sizes

### Production Domain Configuration
- Vercel platform used for deployment and hosting
- Custom domain `ahaagile.com.au` must be configured in Vercel
- SSL certificates should be automatically managed by Vercel
- Domain should serve the production build of the site
- Any domain-specific redirects or canonical URLs should be properly configured

## Testing

### Testing Standards
[Source: architecture/8-testing-strategy.md]
- **Test file location**: Alongside component files with `.test.tsx` extension
- **Testing framework**: Jest (~29.7.0) and React Testing Library
- **Unit Tests**: Key UI components (legal pages, footer updates) and utility functions
- **E2E Tests**: Primary user funnel (Homepage → Case Study → Consultation Page) using Playwright (~1.44.0)
- **Specific requirements for this story**:
  - Test legal pages render markdown content correctly
  - Test footer links route to expected legal pages
  - Test responsive behavior and accessibility features
  - Test that pages render without errors and integrate with layout
  - Verify E2E test suite covers complete user funnel and passes
  - Test production domain configuration works correctly

## Change Log
| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2025-07-27 | 1.0 | Initial story creation with comprehensive architecture context | Bob (Scrum Master) |

## Dev Agent Record

### Agent Model Used
claude-sonnet-4-20250514

### Debug Log References
*To be completed by development agent*

### Completion Notes List
*To be completed by development agent*

### File List
*To be completed by development agent*

## QA Results
*To be completed by QA agent*